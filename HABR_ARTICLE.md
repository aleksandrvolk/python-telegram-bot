# –°–æ–∑–¥–∞–µ–º Telegram-–±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ VDS

–ü—Ä–∏–≤–µ—Ç, –•–∞–±—Ä! –°–µ–≥–æ–¥–Ω—è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å Telegram-–±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ. –≠—Ç–æ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è DevOps-–∏–Ω–∂–µ–Ω–µ—Ä–æ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ –≤—Å–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä—É—Ç–∏–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.

## –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–∏—Ç—É–∞—Ü–∏—é: —É –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–µ–∫—Ç–æ–≤, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã—Ö –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö –Ω–∞ VDS. –ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ:
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–û–±—ã—á–Ω–æ –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –ø–æ SSH, —á—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —É–¥–æ–±–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –≤—ã –Ω–µ –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º. Telegram-–±–æ—Ç —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É ‚Äî –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –ø—Ä—è–º–æ –∏–∑ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

–ù–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

1. **Telegram-–±–æ—Ç** ‚Äî –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **Docker Client** ‚Äî –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker —á–µ—Ä–µ–∑ SSH
3. **VDS —Å Docker** ‚Äî —Å–µ—Ä–≤–µ—Ä, –≥–¥–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```
[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] ‚Üí [Telegram Bot] ‚Üí [SSH] ‚Üí [VDS] ‚Üí [Docker]
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω–∏–µ Telegram-–±–æ—Ç–∞

–°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–¥–∏–º –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather:

1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º `/newbot`
2. –£–∫–∞–∑—ã–≤–∞–µ–º –∏–º—è –∏ username –±–æ—Ç–∞
3. –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞ VDS –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker. –î–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ SSH —É—Å—Ç–∞–Ω–æ–≤–∏–º `sshpass`:

```bash
# Ubuntu/Debian
sudo apt install sshpass

# CentOS/RHEL
sudo yum install sshpass
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install python-telegram-bot python-dotenv psutil
```

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Docker Client

–°–æ–∑–¥–∞–¥–∏–º –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker —á–µ—Ä–µ–∑ SSH:

```python
import asyncio
import subprocess
import json
from typing import List, Dict, Any

class DockerClient:
    def __init__(self):
        self.host = os.getenv('SERVER_HOST')
        self.user = os.getenv('SERVER_USER')
        self.password = os.getenv('SERVER_PASSWORD')
        
    async def _run_ssh_command(self, command: str) -> str:
        """–í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ SSH"""
        ssh_command = [
            'sshpass', '-p', self.password,
            'ssh', '-o', 'StrictHostKeyChecking=no',
            f'{self.user}@{self.host}',
            command
        ]
        
        process = await asyncio.create_subprocess_exec(
            *ssh_command,
            stdout=asyncio.subprocess.PIPE,
            stderr=asyncio.subprocess.PIPE
        )
        
        stdout, stderr = await process.communicate()
        
        if process.returncode != 0:
            raise Exception(f"SSH –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π: {stderr.decode()}")
            
        return stdout.decode()
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã

```python
async def get_containers(self) -> List[Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"""
    command = "docker ps -a --format '{{.ID}}\t{{.Names}}\t{{.Status}}\t{{.Image}}'"
    result = await self._run_ssh_command(command)
    
    containers = []
    for line in result.strip().split('\n'):
        if line:
            parts = line.split('\t')
            if len(parts) >= 4:
                containers.append({
                    'id': parts[0],
                    'name': parts[1],
                    'status': parts[2],
                    'image': parts[3]
                })
    
    return containers

async def start_container(self, container_id: str) -> bool:
    """–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä"""
    command = f"docker start {container_id}"
    await self._run_ssh_command(command)
    return True

async def stop_container(self, container_id: str) -> bool:
    """–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä"""
    command = f"docker stop {container_id}"
    await self._run_ssh_command(command)
    return True
```

### Telegram Bot

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –±–æ—Ç–∞:

```python
from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, CallbackQueryHandler, ContextTypes

class TelegramDockerBot:
    def __init__(self):
        self.bot_token = os.getenv('BOT_TOKEN')
        self.allowed_users = [int(user_id) for user_id in os.getenv('ALLOWED_USERS', '').split(',') if user_id]
        self.docker_client = DockerClient()
        
    async def start(self, update: Update, context: ContextTypes.DEFAULT_TYPE):
        """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /start"""
        user_id = update.effective_user.id
        
        if self.allowed_users and user_id not in self.allowed_users:
            await update.message.reply_text("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –±–æ—Ç—É.")
            return
            
        keyboard = [
            [InlineKeyboardButton("üìã –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤", callback_data="list_containers")],
            [InlineKeyboardButton("üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞", callback_data="stats")],
            [InlineKeyboardButton("üè∑Ô∏è –û–±—Ä–∞–∑—ã", callback_data="list_images")]
        ]
        reply_markup = InlineKeyboardMarkup(keyboard)
        
        await update.message.reply_text(
            "üê≥ *Docker Manager Bot*\n\n–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=reply_markup,
            parse_mode='Markdown'
        )
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

```python
async def show_containers(self, query):
    """–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤"""
    try:
        containers = await self.docker_client.get_containers()
        
        if not containers:
            await query.edit_message_text("üìã –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã")
            return
            
        message = "üìã *–°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:*\n\n"
        keyboard = []
        
        for container in containers:
            status_emoji = "üü¢" if container['status'] == 'running' else "üî¥"
            message += f"{status_emoji} `{container['name']}`\n"
            message += f"   –°—Ç–∞—Ç—É—Å: {container['status']}\n"
            message += f"   –û–±—Ä–∞–∑: {container['image']}\n\n"
            
            keyboard.append([
                InlineKeyboardButton(
                    f"{'‚èπÔ∏è' if container['status'] == 'running' else '‚ñ∂Ô∏è'} {container['name'][:20]}",
                    callback_data=f"container_{container['id']}"
                )
            ])
        
        reply_markup = InlineKeyboardMarkup(keyboard)
        await query.edit_message_text(message, reply_markup=reply_markup, parse_mode='Markdown')
        
    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤: {e}")
        await query.edit_message_text("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤")
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

```python
# –í .env —Ñ–∞–π–ª–µ
ALLOWED_USERS=123456789,987654321

# –í –∫–æ–¥–µ
if self.allowed_users and user_id not in self.allowed_users:
    await update.message.reply_text("‚ùå –£ –≤–∞—Å –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —ç—Ç–æ–º—É –±–æ—Ç—É.")
    return
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSH-–∫–ª—é—á–µ–π

–í–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH-–∫–ª—é—á–∏:

```python
async def _run_ssh_command(self, command: str) -> str:
    ssh_command = [
        'ssh', '-i', '/path/to/private/key',
        f'{self.user}@{self.host}',
        command
    ]
    # ...
```

### 3. –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥

```python
def _validate_docker_command(self, command: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞"""
    allowed_commands = ['docker ps', 'docker start', 'docker stop', 'docker restart', 'docker logs']
    return any(command.startswith(cmd) for cmd in allowed_commands)
```

## Docker Compose –ø–æ–¥–¥–µ—Ä–∂–∫–∞

### 1. –ü–æ–∏—Å–∫ compose —Ñ–∞–π–ª–æ–≤

```python
async def find_compose_files(self) -> List[Dict[str, str]]:
    """–ù–∞–π—Ç–∏ –≤—Å–µ docker-compose.yml —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ"""
    command = "find / -name 'docker-compose.yml' -o -name 'docker-compose.yaml' 2>/dev/null | head -20"
    result = await self._run_ssh_command(command)
    
    compose_files = []
    for line in result.strip().split('\n'):
        if line and line.strip():
            path = line.strip()
            directory = os.path.dirname(path)
            compose_files.append({
                'path': path,
                'directory': directory,
                'name': os.path.basename(directory)
            })
    
    return compose_files
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

```python
async def get_compose_status(self, compose_dir: str) -> Dict[str, Any]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ docker-compose"""
    command = "docker-compose ps --format json"
    result = await self._run_ssh_command(command, compose_dir)
    
    # –ü–∞—Ä—Å–∏–Ω–≥ JSON —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...
    return {
        'directory': compose_dir,
        'services': services,
        'total_services': len(services),
        'running_services': len([s for s in services if s['state'] == 'running'])
    }
```

### 3. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å compose

```python
async def start_compose_services(self, compose_dir: str, services: List[str] = None) -> bool:
    """–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã docker-compose"""
    if services:
        command = f"docker-compose up -d {' '.join(services)}"
    else:
        command = "docker-compose up -d"
    
    await self._run_ssh_command(command, compose_dir)
    return True

async def scale_compose_service(self, compose_dir: str, service: str, replicas: int) -> bool:
    """–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å docker-compose"""
    command = f"docker-compose up -d --scale {service}={replicas}"
    await self._run_ssh_command(command, compose_dir)
    return True
```

## –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤

```python
async def get_stats(self) -> Dict[str, Any]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–µ—Ä–≤–µ—Ä–∞"""
    command = "docker stats --no-stream --format '{{.CPUPerc}}\t{{.MemUsage}}\t{{.MemPerc}}'"
    result = await self._run_ssh_command(command)
    
    # –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...
    return {
        'cpu_percent': cpu_percent,
        'memory_percent': memory_percent,
        'containers': f"{running_containers}/{total_containers}"
    }
```

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```python
async def get_container_logs(self, container_id: str, lines: int = 50) -> str:
    """–ü–æ–ª—É—á–∏—Ç—å –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞"""
    command = f"docker logs --tail {lines} {container_id}"
    return await self._run_ssh_command(command)
```

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞–º–∏

```python
async def get_images(self) -> List[Dict[str, Any]]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–∑–æ–≤"""
    command = "docker images --format '{{.Repository}}\t{{.Tag}}\t{{.Size}}\t{{.CreatedAt}}'"
    result = await self._run_ssh_command(command)
    
    # –ü–∞—Ä—Å–∏–Ω–≥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞...
    return images
```

## –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞

### 1. Dockerfile

```dockerfile
FROM python:3.11-slim

WORKDIR /app

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN apt-get update && apt-get install -y \
    sshpass \
    openssh-client \
    && rm -rf /var/lib/apt/lists/*

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY requirements.txt .

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
RUN pip install --no-cache-dir -r requirements.txt

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
COPY . .

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
RUN useradd -m -u 1000 botuser && chown -R botuser:botuser /app
USER botuser

# –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
ENV PYTHONUNBUFFERED=1

# –ö–æ–º–∞–Ω–¥–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
CMD ["python", "bot_with_compose.py"]
```

### 2. Docker Compose

```yaml
version: '3.8'

services:
  telegram-docker-bot:
    build: .
    container_name: telegram-docker-bot
    restart: unless-stopped
    environment:
      - BOT_TOKEN=${BOT_TOKEN}
      - SERVER_HOST=${SERVER_HOST}
      - SERVER_USER=${SERVER_USER}
      - SERVER_PASSWORD=${SERVER_PASSWORD}
      - ALLOWED_USERS=${ALLOWED_USERS}
    volumes:
      - ./logs:/app/logs
    networks:
      - bot-network
    depends_on:
      - redis

  redis:
    image: redis:7-alpine
    container_name: telegram-bot-redis
    restart: unless-stopped
    volumes:
      - redis_data:/data
    networks:
      - bot-network

volumes:
  redis_data:

networks:
  bot-network:
    driver: bridge
```

### 3. –ó–∞–ø—É—Å–∫ –≤ Docker

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/your-username/telegram-docker-bot.git
cd telegram-docker-bot

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª

# –ó–∞–ø—É—Å–∫
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f telegram-docker-bot
```

## –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`:

```env
BOT_TOKEN=your_telegram_bot_token
SERVER_HOST=your_server_ip
SERVER_USER=your_username
SERVER_PASSWORD=your_password
ALLOWED_USERS=123456789,987654321
```

### 2. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python bot.py
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start` –±–æ—Ç—É
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å/–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏

## –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. Webhook –≤–º–µ—Å—Ç–æ polling

```python
# –î–ª—è production –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook
application.run_webhook(
    listen="0.0.0.0",
    port=8443,
    webhook_url="https://yourdomain.com/webhook"
)
```

### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

```python
import sqlite3

class DatabaseLogger:
    def __init__(self):
        self.conn = sqlite3.connect('bot_logs.db')
        self._create_tables()
    
    def log_action(self, user_id: int, action: str, container_id: str):
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        pass
```

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö

```python
async def monitor_containers(self):
    """–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ —Ñ–æ–Ω–µ"""
    while True:
        containers = await self.docker_client.get_containers()
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        await asyncio.sleep(60)
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–ú—ã —Å–æ–∑–¥–∞–ª–∏ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ Telegram-–±–æ—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

- ‚úÖ –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ Telegram
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

–ö–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –í—ã –º–æ–∂–µ—Ç–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã, –¥–æ–±–∞–≤–∏–≤ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–ª–∏ –∏–∑–º–µ–Ω–∏–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- [python-telegram-bot](https://github.com/python-telegram-bot/python-telegram-bot)
- [Docker CLI Reference](https://docs.docker.com/engine/reference/commandline/cli/)
- [SSH Key Authentication](https://www.ssh.com/academy/ssh/key)

–£–¥–∞—á–∏ –≤ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏! üöÄ
